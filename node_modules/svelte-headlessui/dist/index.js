import{derived as l,readable as wt,writable as I}from"svelte/store";function Re(t){let r;return l(t,(e,o)=>{e!==r&&(r=e,o(e))})}var V=t=>r=>e=>e?r.setAttribute(t,e):r.removeAttribute(t),K=t=>r=>e=>e===void 0?r.removeAttribute(t):r.setAttribute(t,e.toString());var bt=V("aria-activedescendant"),ee=t=>r=>l(t,e=>e.items[e.active]?.id??"").subscribe(bt(r));var we=V("aria-controls"),j=t=>r=>l(t,e=>e.controls).subscribe(we(r));var xt=K("aria-disabled"),ye=t=>r=>l(t,e=>e.items.find(o=>o.id===r.id)?.disabled).subscribe(xt(r));var De=" ",He="Enter";var Ke="Escape",Ie="Backspace",Fe="ArrowLeft",Ue="ArrowUp",Ne="ArrowRight",qe="ArrowDown",Ve="Home",je="End";var We="PageUp",ze="PageDown",Te="Tab";var ke=t=>r=>{r&&requestAnimationFrame(()=>{t.focus({preventScroll:!0})})},Ge=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"];function _e(t){if(t.key!==Te)return;let r=t.currentTarget,e=t.target;if(!r.contains(e))return;let o=[...r.querySelectorAll(Ge.join(","))],i=o[0],s=o[o.length-1];e===i&&t.shiftKey&&(s.focus(),t.preventDefault()),e===s&&!t.shiftKey&&(i.focus(),t.preventDefault())}var Je=t=>r=>l(t,e=>e.expanded).subscribe(e=>{if(e){let o=r.querySelector(Ge.join(","));o&&requestAnimationFrame(()=>o.focus()),r.addEventListener("keydown",_e)}else r.removeEventListener("keydown",_e)});var N={expanded:!1,opened:!1},vt=K("aria-expanded"),W=t=>r=>l(t,e=>e.expanded).subscribe(vt(r)),te=t=>r=>l(t,e=>e.expanded).subscribe(ke(r)),_=t=>r=>l(t,e=>e.opened&&!e.expanded).subscribe(ke(r));var yt=V("aria-label"),C=t=>r=>l(t,e=>e.label).subscribe(yt(r));var re={selected:null,multi:!1},ht=K("aria-selected"),Et=K("aria-multiselectable"),he=(t,r)=>e=>l(t,o=>o.multi?o.selected.includes(r):o.selected===r).subscribe(ht(e)),Me=t=>r=>l(t,e=>e.multi).subscribe(Et(r));function u(t,r){let e=r.map(o=>o(t));return()=>e.forEach(o=>o())}var Lt=t=>{t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},Ce=t=>{},A=(t,r=Lt)=>(...e)=>o=>{t.includes(o.key)&&(e.forEach(i=>i()),r&&r(o))};var q=A([Ke]);var Be=A([Te]),Qe=A([Te],Ce);var oe=()=>({items:[],active:-1});function ie(t){return r=>()=>t(r)}var ne=(t,r)=>({items:t.items.filter(e=>e.id!==r.id)}),Z=t=>t.active===-1||t.items.length===0?void 0:t.active>=t.items.length?t.items[t.active]:t.items[t.active]?.value,ae=(t,r,...e)=>o=>{let i=o.target.closest(t);r(i),e.forEach(s=>s())},se=t=>r=>Re(l(t,e=>e.selected)).subscribe(e=>{if(e){let o=new CustomEvent("select",{detail:{selected:e}});r.dispatchEvent(o)}});function le(t){if(t.active===-1||t.items[t.active].disabled)return{};let r=Z(t);return{selected:t.multi?t.selected.includes(r)?t.selected.filter(o=>o!==r):[...t.selected,r]:r}}function At(t,r){let e=t.textContent?.trim()??"";return{text:e,value:r?.value||e,disabled:r?.disabled??!1}}var ce=t=>t.items.findIndex(r=>!r.disabled),be=t=>{let r=t.active===-1?t.items.length:t.active;for(;--r>-1;)if(!t.items[r].disabled)return r;return t.active},Xe=t=>{if(t.active===-1&&(!t.multi||t.selected.length>0)){let r=t.items.findIndex(e=>e.value===(t.multi?t.selected[t.selected.length-1]:t.selected));if(r>-1)return r}return be(t)},xe=t=>{let r=t.active;for(;++r<t.items.length;)if(!t.items[r].disabled)return r;return t.active},Oe=t=>{if(t.active===-1&&(!t.multi||t.selected.length>0)){let r=t.items.findIndex(e=>e.value===(t.multi?t.selected[0]:t.selected));if(r>-1)return r}return xe(t)},pe=t=>gt(t.items,r=>!r.disabled);function gt(t,r){let e=t.length;for(;e--;)if(r(t[e],e,t))return e;return-1}var me=(t,r,e)=>o=>{let i=r(),s=At(t,o),n=i.items.find(m=>m.id===t.id);if(n){if(n.text===s.text&&n.value===s.value&&n.disabled===s.disabled)return;Object.assign(n,s)}else i.items.push({id:t.id,node:t,...s});e({items:i.items})},de=(t,r)=>e=>{let o=t();r(e?o.items.findIndex(i=>i.id===e.id&&!i.disabled):-1)},Se=(t,r,e=!1)=>o=>{let i=t(),s=i.active===-1?i.items:i.items.slice(i.active+1).concat(i.items.slice(0,i.active+1)),n=new RegExp(`${e?"^":""}${o}`,"i"),m=s.findIndex(c=>c.text.match(n)&&!c.disabled);if(m>-1){let c=(m+i.active+1)%i.items.length;r(c)}};var Tt=0;function kt(){return++Tt}function x(t,r){return t.id||(t.id=`${r}:${kt()}`),t}var ve=(t,r,e,o=!1)=>(t.addEventListener(r,e,o),()=>t.removeEventListener(r,e,o));var g=t=>r=>ve(r,"click",t);function G(t,r){return()=>{let e=null;function o(n){if(n.pointerType===""||!e)return;let m=t().filter(c=>c);for(let c of m)if(c.contains(e))return;r(n),e=null}function i(n){n.isPrimary&&(e=n.target)}let s=[ve(document.documentElement,"pointerdown",i,!0),ve(document.documentElement,"click",o,!0)];return()=>s.forEach(n=>n())}}var Ye=t=>r=>ve(r,"input",e=>{let o=e.target;t(o.value)});function k(...t){let r=e=>{for(let o of t)o(e)};return e=>(e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r))}function Ze(t){return r=>{let e=()=>t();return r.addEventListener("pointerout",e),()=>r.removeEventListener("pointerout",e)}}function Ee(t,r){return e=>{let o=i=>{if(i.target!==e){let s=i.target.closest(t);r(s)}};return e.addEventListener("pointermove",o),()=>e.removeEventListener("pointermove",o)}}var B=()=>{};var J=()=>t=>(t.setAttribute("aria-haspopup","true"),B);var h=t=>r=>(r.setAttribute("role",t),B);var E=(t=-1)=>r=>(r.tabIndex=t,B);var O=t=>r=>(r.setAttribute("type",t),B);var Ht=t=>r=>{r&&(t.value=r)},$e=(t,r)=>e=>l(t,o=>o.expanded?null:o.selected).subscribe(o=>Ht(e)(r(o)));import{tick as at}from"svelte";var H=t=>"headlessui-"+t;var et=A([He]);var tt=A([Ve,We]),rt=A([je,ze]);var ot=A([Fe]),it=A([Ne]);var Le=A([Ue]),Ae=A([qe]);var fe=(t,r,e,o,i="vertical")=>{let s=tt(t),n=i==="vertical"?Le(r):ot(r),m=i==="vertical"?Ae(e):it(e),c=rt(o);return v=>{s(v),n(v),m(v),c(v)}};var eo=A([Ie]),nt=A([Ie],Ce);function Po(t){let r=H("combobox"),e={...oe(),...N,...re,...t,filter:"",moved:!1};e.multi=Array.isArray(e.selected);let o=I(e),i=p=>o.set(e={...e,...p}),s=()=>i({expanded:!0,opened:!0,active:Oe(e)}),n=()=>i({expanded:!1,active:-1}),m=()=>e.expanded?n():s(),c=(p,P=!1)=>{if(e.active!==p){let L=e.expanded||P,T=e.opened||P;i({expanded:L,opened:T,active:p});let w=e.items[p];w&&w.node.scrollIntoView({block:"nearest"})}},v=()=>c(ce(e),!0),S=()=>c(Xe(e),!0),d=()=>c(Oe(e),!0),f=()=>c(pe(e),!0),F=()=>{if(e.multi&&e.filter===""){let p=e.selected[e.selected.length-1];i({selected:e.selected.slice(0,e.selected.length-1)}),at().then(()=>{let P=e.items.findIndex(L=>L.value===p);c(P)})}},z=()=>{i({filter:"",expanded:!1})},Q=()=>e.input?.focus(),X=async p=>{let P=e.active===-1?e.selected:e.items[e.active].value;i({filter:p,expanded:!0,opened:!0}),await at();let L=e.items.findIndex(ge=>ge.value===e.selected),T=e.items.findIndex(ge=>ge.value===P),w=e.items.length?e.moved||L===-1?T===-1?0:T:L:-1;e.active!==w&&i({active:w})},$=de(()=>e,c),ue=p=>i(ne(e,p)),b=()=>i(le(e));function D(p){return x(p,r),i({input:p}),{destroy:u(p,[O("text"),h("combobox"),E(0),C(o),W(o),j(o),$e(o,L=>L?.name),k(et(b,e.multi?B:m),q(n),fe(v,S,d,f),Qe(b,n),nt(F)),Ye(X),g(e.multi?B:m),_(o),se(o)])}}function Y(p){return x(p,r),i({button:p}),{destroy:u(p,[O("button"),h("button"),J(),E(-1),W(o),j(o),g(m),L=>(L.addEventListener("focus",Q),()=>L.removeEventListener("focus",Q))])}}function a(p){return x(p,r),i({controls:p.id}),{destroy:u(p,[h("listbox"),E(-1),G(()=>[e.input,e.button,p],n),g(ae('[role="option"]',$,b,e.multi?Q:n)),Ee('[role="option"]',$),ee(o),Me(o)])}}function y(p,P){x(p,r);let L=me(p,()=>e,i);L(P);let T=e.items[e.items.length-1].value,w=u(p,[E(-1),h("option"),ye(o),he(o,T),ie(ue)]);return{update:L,destroy:w}}function M(p,P){return{destroy:u(p,[g(T=>{i({selected:e.selected.filter(w=>w!==P)}),T.stopImmediatePropagation()})])}}let{subscribe:U}=l(o,p=>{let{expanded:P,selected:L,filter:T}=p;return{expanded:P,selected:L,filter:T,active:Z(p)}});return{subscribe:U,input:D,button:Y,items:a,item:y,deselect:M,reset:z,open:s,close:n,set:i}}var Mt=K("aria-modal"),st=t=>r=>l(t,e=>e.expanded).subscribe(Mt(r));function Qo(t){let r=H("dialog"),e={...N,...t},o=I(e),i=v=>o.set(e={...e,...v}),s=()=>i({expanded:!0,opened:!0}),n=()=>i({expanded:!1});function m(v){return x(v,r),{destroy:u(v,[h("dialog"),E(-1),st(o),C(o),Je(o),G(()=>[v],n),k(q(n))])}}let{subscribe:c}=l(o,v=>{let{expanded:S}=v;return{expanded:S}});return{subscribe:c,modal:m,open:s,close:n,set:i}}var R=A([De,He]);function bi(t){let r=H("disclosure"),e={...N,...t},o=I(e),i=d=>o.set(e={...e,...d}),s=()=>i({expanded:!0,opened:!0}),n=()=>i({expanded:!1}),m=()=>e.expanded?n():s();function c(d){return x(d,r),i({button:d.id}),{destroy:u(d,[O("button"),h("button"),J(),E(0),W(o),C(o),j(o),g(m),k(q(n),R(m)),_(o)])}}function v(d){return x(d,r),i({panel:d.id,controls:d.id}),{destroy:u(d,[te(o)])}}let{subscribe:S}=l(o,d=>{let{expanded:f}=d;return{expanded:f}});return{subscribe:S,button:c,panel:v,open:s,close:n,set:i}}var lt=t=>/^\S$/.test(t);var Pe=t=>{let r,e="";return o=>{let{key:i}=o;lt(i)&&(r&&clearTimeout(r),e+=i,t(e),r=window.setTimeout(()=>{r=0,e=""},350))}};function _i(t){let r=H("listbox"),e={...oe(),...N,...re,...t};e.multi=Array.isArray(e.selected);let o=I(e),i=a=>o.set(e={...e,...a}),s=()=>i({expanded:!0,opened:!0,active:e.items.findIndex(a=>a.value===e.selected)}),n=()=>i({expanded:!1}),m=()=>e.expanded?n():s(),c=a=>{if(e.active!==a){i({active:a});let y=e.items[a];y&&y.node.scrollIntoView({block:"nearest"})}},v=()=>c(ce(e)),S=()=>c(be(e)),d=()=>c(xe(e)),f=()=>c(pe(e)),F=Se(()=>e,c),z=de(()=>e,c),Q=a=>i(ne(e,a)),X=()=>i(le(e));function $(a){return x(a,r),i({button:a}),{destroy:u(a,[O("button"),h("button"),J(),E(0),C(o),W(o),j(o),g(m),k(R(m),Le(m),Ae(m)),_(o),se(o)])}}function ue(a){return x(a,r),i({controls:a.id}),{destroy:u(a,[h("listbox"),E(0),G(()=>[e.button,a],n),g(ae('[role="option"]',z,X,e.multi?B:n)),Ee('[role="option"]',z),k(R(X,e.multi?B:n),q(n),fe(v,S,d,f),Be(B),Pe(F)),te(o),ee(o),Me(o)])}}function b(a,y){x(a,r);let M=me(a,()=>e,i);M(y);let U=e.items[e.items.length-1].value,p=u(a,[E(-1),h("option"),ye(o),he(o,U),ie(Q)]);return{update:M,destroy:p}}function D(a,y){return{destroy:u(a,[g(U=>{i({selected:e.selected.filter(p=>p!==y)}),U.stopImmediatePropagation()})])}}let{subscribe:Y}=l(o,a=>{let{expanded:y,selected:M}=a;return{expanded:y,selected:M,active:Z(a)}});return{subscribe:Y,button:$,items:ue,item:b,deselect:D,open:s,close:n,set:i}}function Ln(t){let r=H("menu"),e={...oe(),...N,...re,...t},o=I(e),i=a=>o.set(e={...e,...a}),s=()=>i({expanded:!0,opened:!0}),n=()=>i({expanded:!1,active:-1,selected:null}),m=()=>e.expanded?n():s(),c=(a,y=!1)=>e.active!==a&&i({expanded:e.expanded||y,active:a}),v=()=>c(ce(e),!0),S=()=>c(be(e),!0),d=()=>c(xe(e),!0),f=()=>c(pe(e),!0),F=()=>i(le(e)),z=()=>c(-1),Q=Se(()=>e,c,!0),X=de(()=>e,c),$=a=>i(ne(e,a));function ue(a){return x(a,r),i({button:a}),{destroy:u(a,[O("button"),h("button"),J(),E(0),C(o),W(o),j(o),g(m),k(R(m),Le(f),Ae(v)),_(o),se(o)])}}function b(a){return x(a,r),i({controls:a.id}),{destroy:u(a,[h("menu"),E(0),G(()=>[e.button,a],n),g(ae('[role="menuitem"]',X,F,n)),Ee('[role="menuitem"]',X),Ze(z),k(R(F,n),q(n),fe(v,S,d,f),Be(B),Pe(Q)),te(o),ee(o)])}}function D(a,y){x(a,r);let M=me(a,()=>e,i);M(y);let U=u(a,[E(-1),h("menuitem"),ye(o),ie($)]);return{update:M,destroy:U}}let{subscribe:Y}=l(o,a=>{let{expanded:y}=a;return{expanded:y,active:Z(a)}});return{subscribe:Y,button:ue,items:b,item:D,open:s,close:n,set:i}}function Un(t){let r=H("popover"),e={...N,...t},o=I(e),i=d=>o.set(e={...e,...d}),s=()=>i({expanded:!0,opened:!0}),n=()=>i({expanded:!1}),m=()=>e.expanded?n():s();function c(d){return x(d,r),i({button:d}),{destroy:u(d,[O("button"),h("button"),J(),E(0),W(o),C(o),j(o),g(m),k(q(n),R(m)),_(o)])}}function v(d){return x(d,r),i({panel:d.id,controls:d.id}),{destroy:u(d,[h("menu"),G(()=>[e.button,d],n),te(o)])}}let{subscribe:S}=l(o,d=>{let{expanded:f}=d;return{expanded:f}});return{subscribe:S,button:c,panel:v,open:s,close:n,set:i}}var ct={orientation:"horizontal"},Ct=V("aria-oriantation"),pt=t=>r=>l(t,e=>e.orientation).subscribe(Ct(r));function ca(t){let r=H("tabs"),e=H("tab"),o=H("panel"),i={tabs:[],panels:[],auto:!0,...oe(),...re,...ct,...t},s=I(i),n=b=>s.set(i={...i,...b}),m=b=>i.active!==b&&n({active:b}),c=()=>m(ce(i)),v=()=>m(be(i)),S=()=>m(xe(i)),d=()=>m(pe(i)),f=()=>n(le(i)),F=de(()=>i,m),z=b=>n(ne(i,b));function Q(b){x(b,r);let D=a=>()=>l(a,y=>y.auto&&y.active!==i.items.findIndex(M=>M.value===i.selected)).subscribe(f);return{destroy:u(b,[h("tablist"),C(s),pt(s),E(-1),g(ae('[role="tab"]',F,f)),k(R(f),fe(c,v,S,d,i.orientation)),ee(s),D(s),se(s)])}}function X(b,D){x(b,e),n({tabs:[...i.tabs,b]}),me(b,()=>i,n)(D);let a=i.items[i.items.length-1].value;i.selected===a&&n({active:i.tabs.length-1});let y=V("tabindex"),M=L=>T=>l(L,w=>w.selected===a?"0":"-1").subscribe(y(T)),U=L=>T=>l(L,w=>w.panels[w.tabs.findIndex(ge=>ge===T)]?.id).subscribe(we(T)),p=L=>T=>l(L,w=>w.selected===a).subscribe(ke(T));return{destroy:u(b,[O("button"),h("tab"),he(s,a),M(s),U(s),p(s)])}}function $(b){x(b,o),n({panels:[...i.panels,b]});let D=V("aria-labelledby"),Y=y=>M=>l(y,U=>U.tabs[U.panels.findIndex(p=>p===M)].id).subscribe(D(M));return{destroy:u(b,[E(0),h("tabpanel"),Y(s),ie(z)])}}let{subscribe:ue}=l(s,b=>{let{selected:D}=b;return{selected:D,active:Z(b)}});return{subscribe:ue,list:Q,tab:X,panel:$,set:n}}var mt={checked:!1},Bt=K("aria-checked"),dt=t=>r=>l(t,e=>e.checked).subscribe(Bt(r));var ft={pressed:!1},St=K("aria-pressed"),ut=t=>r=>l(t,e=>e.pressed).subscribe(St(r));function Sa(t){let r=H("switch"),e={...mt,...ft,...t},o=I(e),i=f=>o.set(e={...e,...f}),s=f=>i({checked:f,pressed:f}),n=()=>s(!0),m=()=>s(!1),c=()=>e.checked?m():n();function v(f){return x(f,r),{destroy:u(f,[O("button"),h("button"),E(0),ut(o),C(o),g(c),k(R(c))])}}function S(f){return x(f,r),{destroy:u(f,[O("button"),h("switch"),E(0),C(o),dt(o),g(c),k(R(c))])}}let{subscribe:d}=l(o,f=>{let{checked:F,pressed:z}=f;return{checked:F,pressed:z}});return{subscribe:d,button:v,toggle:S,set:i}}export{Po as createCombobox,Qo as createDialog,bi as createDisclosure,_i as createListbox,Ln as createMenu,Un as createPopover,Sa as createSwitch,ca as createTabs};
//# sourceMappingURL=index.js.map